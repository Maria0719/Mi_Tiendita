{% extends 'base.html' %}
<!-- Hereda la estructura base, incluyendo la barra lateral y estilos globales -->

{% block content %}
<!-- Inicia el bloque de contenido que se insertarÃ¡ en la plantilla base -->

<div class="container mt-4">
    <!-- Contenedor principal con margen superior -->

    <h1 class="text-center mb-4">ðŸ“Š GrÃ¡ficas Financieras</h1>
    <!-- TÃ­tulo centrado con Ã­cono de grÃ¡fico -->

    <!-- ==== GRÃFICA 1 ==== -->
    <div class="card mb-5 shadow-sm">
        <!-- Tarjeta con sombra y margen inferior -->

        <div class="card-body">
            <!-- Contenido interno de la tarjeta -->

            <h4 class="card-title text-center">Porcentaje de Ganancia por Producto</h4>
            <!-- SubtÃ­tulo centrado -->

            <div style="overflow-x:auto">
                <!-- Permite hacer scroll horizontal si la imagen es muy ancha -->

                {% if grafica1 %}
                <!-- Si existe la imagen base64 en la variable grafica1 -->

                <img src="data:image/png;base64,{{ grafica1 }}" class="img-fluid mt-3" 
                    alt="GrÃ¡fica de ganancia por porcentaje" style="max-height: 500px;">
                <!-- Muestra la imagen generada desde Flask codificada en base64 -->
                <p class="text-muted text-center mt-2">
                    ðŸ“Š <strong>Â¿QuÃ© muestra?</strong><br>
                        Esta grÃ¡fica representa el <strong>porcentaje de ganancia individual</strong> aplicado a cada producto. Es decir, cuÃ¡nto mÃ¡s estÃ¡s cobrando sobre el precio de compra.
                </p>
                <p class="text-muted text-center">
                âœ… <strong>Â¿CÃ³mo se calcula?</strong> 
                ((Precio de Venta - Precio de Compra) Ã· Precio de Compra) Ã— 100<br>
                âœ… <strong>Â¿Para quÃ© sirve?</strong> 
                Te ayuda a comparar el margen de utilidad entre productos y detectar inconsistencias.
                </p>
 
                {% else %}
                <p class="text-center text-muted mt-3">âš  No hay datos disponibles para esta grÃ¡fica.</p>
                <!-- Mensaje en caso de que no se haya generado la grÃ¡fica -->
                {% endif %}
            </div>

            <p class="text-muted text-center mt-2">
                Representa el porcentaje de ganancia aplicado a cada producto.
            </p>
        </div>
    </div>

    <!-- ==== GRÃFICA 2 ==== -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h4 class="card-title text-center">Resumen Financiero</h4>
            {% if grafica2 %}
            <img src="data:image/png;base64,{{ grafica2 }}" class="img-fluid mt-3" alt="GrÃ¡fica de resumen financiero">
            <p class="text-muted text-center mt-2">
    ðŸ“Š <strong>Â¿QuÃ© muestra?</strong><br>
    Compara visualmente la <strong>ganancia bruta, los gastos registrados y la ganancia neta final</strong>.
</p>
<p class="text-muted text-center">
    âœ… <strong>Ganancia bruta:</strong> ingresos esperados si vendes todo el inventario.<br>
    âœ… <strong>Gastos:</strong> suma total de egresos operativos.<br>
    âœ… <strong>Ganancia neta:</strong> utilidad final despuÃ©s de restar los gastos.<br>
    Ideal para tener una visiÃ³n rÃ¡pida del estado econÃ³mico general.
</p>
            {% else %}
            <p class="text-center text-muted mt-3">âš  No hay datos disponibles para esta grÃ¡fica.</p>
            {% endif %}
            <p class="text-muted text-center mt-2">
                Ganancia bruta = Ingresos - Costos | Ganancia neta = Ganancia bruta - Gastos
            </p>
        </div>
    </div>

    <!-- ==== GRÃFICA 3 ==== -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h4 class="card-title text-center">Top 5 Productos por Valor de Inventario</h4>
            {% if grafica3 %}
            <img src="data:image/png;base64,{{ grafica3 }}" class="img-fluid mt-3" alt="Top Inventario">
            <p class="text-muted text-center mt-2">
    ðŸ“Š <strong>Â¿QuÃ© muestra?</strong><br>
    Muestra los 5 productos en los que tienes mayor <strong>dinero invertido en stock</strong>, calculado por el precio de compra multiplicado por la cantidad.
</p>
<p class="text-muted text-center">
    âœ… <strong>Â¿CÃ³mo se calcula?</strong> Precio de Compra Ã— Stock<br>
    âœ… <strong>Â¿Para quÃ© sirve?</strong> 
    Identifica en quÃ© productos estÃ¡s comprometiendo mÃ¡s capital y si eso se alinea con tus ventas.
</p>

            {% else %}
            <p class="text-center text-muted mt-3">âš  No hay datos disponibles para esta grÃ¡fica.</p>
            {% endif %}
        </div>
    </div>

    <!-- ==== GRÃFICA 4 ==== -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <h4 class="card-title text-center">Ganancia Promedio por CategorÃ­a</h4>
            {% if grafica4 %}
            <img src="data:image/png;base64,{{ grafica4 }}" class="img-fluid mt-3" alt="Ganancia por CategorÃ­a">
            <p class="text-muted text-center mt-2">
    ðŸ“Š <strong>Â¿QuÃ© muestra?</strong><br>
    Esta grÃ¡fica calcula el <strong>porcentaje promedio de ganancia</strong> agrupado por categorÃ­a de producto.
</p>
<p class="text-muted text-center">
    âœ… <strong>Â¿CÃ³mo se calcula?</strong> Promedio de ((Venta - Compra) Ã· Compra Ã— 100) por categorÃ­a<br>
    âœ… <strong>Â¿Para quÃ© sirve?</strong> 
    Identifica quÃ© tipo de productos son mÃ¡s rentables y enfoca tu estrategia en ellos.
</p>

            {% else %}
            <p class="text-center text-muted mt-3">âš  No hay datos disponibles para esta grÃ¡fica.</p>
            {% endif %}
        </div>
    </div>

    <!-- BOTÃ“N DE VOLVER -->
    <div class="text-center mt-5">
        <a href="{{ url_for('index') }}" class="btn btn-primary">â¬… Volver al inicio</a>
    </div>
</div>

{% endblock %}
<!-- Cierra el bloque de contenido -->
